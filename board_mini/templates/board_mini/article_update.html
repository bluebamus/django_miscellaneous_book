{% extends 'board_mini/base.html' %}

{% block title %}<title>게시글 상세 - {{ article.pk }}. {{ article.title }}</title>{% endblock title %}

{% block css %}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
{% endblock css %}

{% block content %}

{% if messages %}                            <!-- message 프레임워크 -->

<!-- messages 객체는 iterable 객체이기 때문에 for-in 루프로 반복출력해야 합니다 -->
<!-- message 그 자체를 출력해도 되고 message.tags 또는 message.level를 이용하셔도 됩니다. 
message.level은 message를 저장할 때 사용하는 그 레벨이 출력이 되고, 
tags는 extra_tags와 message.level의 조합입니다. 
이 예제에서는 message.tags를 이용했는데 extra_tags를 전달하지 않았기 때문에 level값만 출력이 됩니다. -->

{% for message in messages %}
<div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
  {{ message }}
</div>
{% endfor %}
{% endif %}

<!-- upate는 url에 article.pk 값이 포함되기 때문에 아직 객체가 생성되지 않은 create 액션은 사용할 수 없는 url입니다. 그래서 현재 url을 의미하는 .을 이용했습니다. 어차피 post나 get이나 모두 같은 뷰에서 처리하니 url이 같아도 상관없습니다.

그리고 action의 값은 뷰에서 article 객체가 전달되었으면 'update' 
그렇지 않으면 'create'가 되도록 수정했습니다. 
게시글 생성화면에서 article 객체가 전달되지 않지만 article.pk, article.title 등의 변수는 
python과는 달리 오류를 발생하지 않습니다. 
None 객체의 속성값에 접근하면 None이 출력됩니다.-->

<form action="." method="post" class="form-horizontal">
{% csrf_token %}                                     <!-- csrftoken 태그 -->
<input type="hidden" name="action" value="{% if article %}update{% else %}create{% endif %}">
<table class="table table-striped table-bordered">
	<tr>
		<th>번호</th>
		<td>{{ article.pk }}</td>
	</tr>
	<tr>
		<th>제목</th>
		<td><input type="text" class="form-control" name="title" value="{{ article.title }}"></td>
	</tr>
	<tr>
		<th>내용</th>
		<td><textarea rows="10" class="form-control" name="content">{{ article.content }}</textarea></td>
	</tr>
    <tr>
		<th>작성자</th>
		<td><input type="text" class="form-control" name="author" value="{{ article.author }}"></td>
	</tr>
    <tr>
		<th>작성일</th>
		<td>{{ article.created_at | date:"Y-m-d H:i" }}</td>
	</tr>
</table>

<button class="btn btn-primary" type="submit">게시글 저장</button>
</form>
{% endblock content %}